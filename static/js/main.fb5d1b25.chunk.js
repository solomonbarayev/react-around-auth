(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},22:function(e,t,a){e.exports=a.p+"static/media/hamburger_icon.318d0337.svg"},23:function(e,t,a){e.exports=a.p+"static/media/close_icon.9293aa8f.svg"},30:function(e,t,a){e.exports=a.p+"static/media/successful_icon.e38b395c.svg"},31:function(e,t,a){e.exports=a.p+"static/media/unsuccessful_icon.f10ac534.svg"},35:function(e,t,a){e.exports=a(52)},43:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(20),r=a.n(o),i=(a(43),a(33)),l=a(1),s=a(21),m=a.n(s),u=a(2),p=a(4),d=a(22),_=a.n(d),f=a(23),h=a.n(f);function b(e){var t=e.loggedIn,a=e.email,n=e.toggleMobileMenu,o=e.isMobileMenuOpen,r=e.handleSignout,i=Object(u.h)(),l="/signin"===i.pathname,s="/signup"===i.pathname;return c.a.createElement("nav",{className:"navbar"},c.a.createElement("ul",{className:"header__links header__links_desktop ".concat(l||s?"header__links_signup-login-page":"")},l&&c.a.createElement("li",{className:"header__link-item"},c.a.createElement(p.b,{to:"/signup",className:"header__link"},"Sign up")),s&&c.a.createElement("li",{className:"header__link-item"},c.a.createElement(p.b,{to:"/signin",className:"header__link"},"Log in")),t&&c.a.createElement("li",{className:"header__link-item"},c.a.createElement(p.b,{to:"/signin",className:"header__link",onClick:r},"Log out")),t&&c.a.createElement("li",{className:"header__link-item"},a)),!s&&!l&&c.a.createElement("button",{type:"button",className:"header__menu-button",onClick:n},o?c.a.createElement("img",{src:h.a,alt:"close",className:"header__close-icon"}):c.a.createElement("img",{src:_.a,alt:"menu",className:"header__hamburger-icon"})))}function g(e){return c.a.createElement("div",{className:"header__mobile-menu ".concat(e.isMobileMenuOpen?"header__mobile-menu_opened":"")},c.a.createElement("ul",{className:"header__links header__links_mobile"},c.a.createElement("li",{className:"header__link-item"},e.email),c.a.createElement("li",{className:"header__link-item"},c.a.createElement(p.b,{to:"/signin",className:"header__link",onClick:e.handleSignout},"Log out"))),c.a.createElement("div",{className:"separator separator_type_mobile-menu"}))}var E=function(e){var t=e.loggedIn,a=e.email,o=e.handleSignout,r=c.a.useState(!1),i=Object(l.a)(r,2),s=i[0],u=i[1];return Object(n.useEffect)(function(){t||u(!1)},[t]),c.a.createElement("header",{className:"header section"},c.a.createElement(g,{isMobileMenuOpen:s,email:a,handleSignout:o}),c.a.createElement("div",{className:"header__container"},c.a.createElement("img",{src:m.a,alt:"Around the US Logo",className:"logo"}),c.a.createElement(b,{loggedIn:t,email:a,isMobileMenuOpen:s,toggleMobileMenu:function(){u(!s)},handleSignout:o})),c.a.createElement("div",{className:"separator"}))},v=c.a.createContext(),N=function(e){var t=Object(n.useContext)(v),a=e.card.owner._id===t._id,o=e.card.likes.some(function(e){return e._id===t._id}),r="card__like-button ".concat(o&&"card__like-button_active");return c.a.createElement("li",{className:"card"},a&&c.a.createElement("button",{type:"button","aria-label":"delete card",className:"card__delete-button",onClick:function(){e.onDeleteButtonClick(e.card)}}),c.a.createElement("img",{src:e.card.link,alt:e.card.name,className:"card__image",onClick:function(){e.onCardClick(e.card)}}),c.a.createElement("div",{className:"card__title-area"},c.a.createElement("h2",{className:"card__title"},e.card.name),c.a.createElement("div",{className:"card__like-container"},c.a.createElement("button",{className:r,type:"button","aria-label":"like card",onClick:function(){e.onLikeCard(e.card)}}),c.a.createElement("span",{className:"card__like-count"},e.card.likes.length))))},k=function(e){var t=e.onCardClick,a=e.onAddPlaceClick,o=e.onEditProfileClick,r=e.onEditAvatarClick,i=e.cards,l=e.onCardLike,s=e.onDeleteButtonClick,m=Object(n.useContext)(v);return c.a.createElement("main",{className:"content section"},c.a.createElement("section",{className:"profile"},c.a.createElement("div",{className:"profile__image-container",onClick:r},c.a.createElement("img",{src:m.avatar,alt:"User's Profile",className:"profile__image"})),c.a.createElement("div",{className:"profile__info"},c.a.createElement("div",{className:"profile__person"},c.a.createElement("h1",{className:"profile__name"},m.name),c.a.createElement("button",{className:"profile__edit-button",type:"button","aria-label":"edit profile",onClick:o})),c.a.createElement("p",{className:"profile__title"},m.about)),c.a.createElement("button",{className:"profile__add-button",type:"button","aria-label":"add place",onClick:a})),c.a.createElement("section",{className:"cards"},c.a.createElement("ul",{className:"cards__list"},i.map(function(e){return c.a.createElement(N,{card:e,key:e._id,onCardClick:t,onLikeCard:l,onDeleteButtonClick:s})}))))},O=function(){return c.a.createElement("footer",{className:"footer section"},c.a.createElement("p",{className:"footer__copyrights"},"\xa9 ",(new Date).getFullYear()," Around The U.S."))},C=function(e){return c.a.createElement("div",{className:"popup popup_type_image-prev ".concat(e.isOpen?"popup_opened":"")},c.a.createElement("div",{className:"popup__container popup__container_type_image-preview"},c.a.createElement("button",{className:"popup__close-button popup__close-button_type_image-prev",type:"button",onClick:e.onClose}),c.a.createElement("img",{src:e.card.link,alt:"#",className:"popup__image"}),c.a.createElement("p",{className:"popup__caption"},e.card.name)))},j=a(25),y=a(26),S=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(j.a)(this,e),this._baseUrl=a,this._headers=n}return Object(y.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){var t=e.name,a=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:a})}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"createCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then(this._checkResponse):fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then(this._checkResponse)}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"2aae8d26-8315-4517-953d-28905b81f143","Content-Type":"application/json"}}),w=function(e){return c.a.createElement("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":"")},c.a.createElement("div",{className:"popup__container popup__container_type_".concat(e.name)},c.a.createElement("button",{className:"popup__close-button popup__close-button_type_".concat(e.name),type:"button",onClick:e.onClose}),c.a.createElement("h2",{className:"popup__title popup__title_type_".concat(e.name)},e.title),c.a.createElement("form",{action:"submit",className:"form popup__form",name:e.name,onSubmit:e.onSubmit},e.children,!e.isTooltipOpen&&c.a.createElement("fieldset",{className:"form__fieldset"},c.a.createElement("button",{className:"form__button form__button_type_".concat(e.name),type:"submit"},e.buttonText)))))},L=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateUser,r=e.isLoading,i=Object(n.useContext)(v),s=Object(n.useState)(""),m=Object(l.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)(""),_=Object(l.a)(d,2),f=_[0],h=_[1];Object(n.useEffect)(function(){p(i.name),h(i.about)},[i]);return c.a.createElement(w,{title:"Edit profile",name:"edit-profile",buttonText:"".concat(r?"Saving...":"Save"),isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o({name:u,about:f})}},c.a.createElement("fieldset",{className:"form__fieldset"},c.a.createElement("div",{className:"form__input-container"},c.a.createElement("input",{id:"name-input",type:"text",name:"name",placeholder:"Name",className:"form__input form__input_type_profile-name",minLength:"2",maxLength:"40",value:u||"",onChange:function(e){p(e.target.value)},required:!0}),c.a.createElement("span",{className:"form__input-error name-input-error"})),c.a.createElement("div",{className:"form__input-container"},c.a.createElement("input",{id:"title-input",type:"text",name:"title",placeholder:"About me",className:"form__input form__input_type_profile-title",minLength:"2",maxLength:"200",value:f||"",onChange:function(e){h(e.target.value)},required:!0}),c.a.createElement("span",{className:"form__input-error title-input-error"}))))},T=function(e){var t=e.isLoading,a=e.isOpen,o=e.onClose,r=e.onUpdateAvatar,i=Object(n.useRef)();return c.a.createElement(w,{title:"Change Profile Picture",name:"avatar",isOpen:a,onClose:o,buttonText:"".concat(t?"Saving...":"Save"),onSubmit:function(e){e.preventDefault(),r(i.current.value)}},c.a.createElement("fieldset",{className:"form__fieldset"},c.a.createElement("div",{className:"form__input-container"},c.a.createElement("input",{id:"avatar-input",type:"url",name:"link",placeholder:"Profile Image link",className:"form__input form__input_type_avatar",required:!0,ref:i}),c.a.createElement("span",{className:"form__input-error avatar-input-error"}))))},U=function(e){var t=e.isLoading,a=e.isOpen,o=e.onClose,r=e.onAddPlaceSubmit,i=Object(n.useState)(""),s=Object(l.a)(i,2),m=s[0],u=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),_=d[0],f=d[1];return c.a.createElement(w,{title:"New place",name:"add-place",isOpen:a,onClose:o,buttonText:"".concat(t?"Creating...":"Create"),onSubmit:function(e){e.preventDefault(),r({name:m,link:_})}},c.a.createElement("fieldset",{className:"form__fieldset"},c.a.createElement("div",{className:"form__input-container"},c.a.createElement("input",{id:"place-title-input",type:"text",name:"name",placeholder:"Title",className:"form__input form__input_type_place-name",required:!0,minLength:"1",maxLength:"30",value:m||"",onChange:function(e){u(e.target.value)}}),c.a.createElement("span",{className:"form__input-error place-title-input-error"})),c.a.createElement("div",{className:"form__input-container"},c.a.createElement("input",{id:"place-url-input",type:"url",name:"link",placeholder:"Image link",className:"form__input form__input_type_place-url",required:!0,value:_||"",onChange:function(e){f(e.target.value)}}),c.a.createElement("span",{className:"form__input-error place-url-input-error"}))))},x=function(e){var t=e.isLoading,a=e.isOpen,n=e.onClose,o=e.onSubmitDelete;return c.a.createElement(w,{title:"Are you sure?",name:"delete-card",buttonText:"".concat(t?"Deleting...":"Yes"),isOpen:a,onClose:n,onSubmit:o})},P=a(10),A=a(13),I=function(e){var t=e.handleLogin,a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),r=o[0],i=o[1],s=function(e){var t=e.target,a=t.name,n=t.value;i(Object(A.a)({},r,Object(P.a)({},a,n)))};return c.a.createElement("div",{className:"auth-form"},c.a.createElement("h2",{className:"auth-form__title"},"Log in"),c.a.createElement("form",{className:"auth-form__form",onSubmit:function(e){e.preventDefault();var a=r.email,n=r.password;t({email:a,password:n})}},c.a.createElement("input",{type:"email",name:"email",className:"auth-form__input",placeholder:"Email",value:r.email,onChange:s}),c.a.createElement("input",{type:"password",name:"password",className:"auth-form__input",placeholder:"Password",value:r.password,onChange:s}),c.a.createElement("footer",{className:"auth-form__footer"},c.a.createElement("div",{className:"auth-form__footer-wrapper"},c.a.createElement("button",{type:"submit",className:"auth-form__submit-button"},"Log in"),c.a.createElement("p",{className:"auth-form__footer-text"},"Not a member yet?"," ",c.a.createElement(p.b,{to:"/signup",className:"auth-form__footer-link"},"Sign up here!"))))))},D=function(e){var t=e.handleRegister,a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),r=o[0],i=o[1],s=function(e){var t=e.target,a=t.name,n=t.value;i(Object(A.a)({},r,Object(P.a)({},a,n)))};return c.a.createElement("div",{className:"auth-form"},c.a.createElement("h2",{className:"auth-form__title"},"Sign up"),c.a.createElement("form",{className:"auth-form__form",onSubmit:function(e){e.preventDefault();var a=r.email,n=r.password;t({email:a,password:n})}},c.a.createElement("input",{type:"email",name:"email",className:"auth-form__input",placeholder:"Email",value:r.email,onChange:s}),c.a.createElement("input",{type:"password",name:"password",className:"auth-form__input",placeholder:"Password",value:r.password,onChange:s}),c.a.createElement("footer",{className:"auth-form__footer"},c.a.createElement("div",{className:"auth-form__footer-wrapper"},c.a.createElement("button",{type:"submit",className:"auth-form__submit-button"},"Sign up"),c.a.createElement("p",{className:"auth-form__footer-text"},"Already a member?"," ",c.a.createElement(p.b,{to:"/signin",className:"auth-form__footer-link"},"Log in here!"))))))},M=a(34),R=a(32),B=function(){return c.a.createElement("div",{className:"loader"},c.a.createElement(R.a,{height:"80",width:"80",color:"#fff",ariaLabel:"triangle-loading",wrapperStyle:{},wrapperClassName:"",visible:!0}))},J=function(e){var t=e.loggedIn,a=e.children,o=e.isCheckingToken,r=Object(M.a)(e,["loggedIn","children","isCheckingToken"]),i=Object(n.useState)(!1),s=Object(l.a)(i,2),m=s[0],p=s[1];return Object(n.useEffect)(function(){p(!(o&&!t))},[o,t]),m?c.a.createElement(u.b,r,t?a:c.a.createElement(u.a,{to:"/signin"})):c.a.createElement(B,null)},q=a(30),F=a.n(q),Y=a(31),z=a.n(Y),H=function(e){var t=e.isOpen,a=e.onClose,o="successful"===e.type;return Object(n.useEffect)(function(){if(t){var e=setTimeout(function(){a()},2500);return function(){return clearTimeout(e)}}},[t]),c.a.createElement(w,{name:"tooltip",title:"",isOpen:t,onClose:a,className:"tooltip"},c.a.createElement("img",{src:o?F.a:z.a,className:"tooltip__image",alt:"".concat(o?"successful":"unsuccessful"," attempt")}),c.a.createElement("h2",{className:"tooltip__text"},o?"Success! You have now been registered.":"Oops, something went wrong! Please try again."))},G="https://register.nomoreparties.co",K=function(e,t){return fetch(e,t).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})},Q=function(e,t){return K("".concat(G,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})},V=function(e,t){return K("".concat(G,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})},W=function(e){return K("".concat(G,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})};var X=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),s=Object(l.a)(r,2),m=s[0],p=s[1],d=Object(n.useState)(!1),_=Object(l.a)(d,2),f=_[0],h=_[1],b=Object(n.useState)(!1),g=Object(l.a)(b,2),N=g[0],j=g[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),P=w[0],A=w[1],M=Object(n.useState)(!1),R=Object(l.a)(M,2),B=R[0],q=R[1],F=Object(n.useState)(""),Y=Object(l.a)(F,2),z=Y[0],G=Y[1],K=Object(n.useState)({name:"",link:""}),X=Object(l.a)(K,2),Z=X[0],$=X[1],ee=Object(n.useState)([]),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!0),oe=Object(l.a)(ce,2),re=oe[0],ie=oe[1],le=Object(n.useState)({}),se=Object(l.a)(le,2),me=se[0],ue=se[1],pe=Object(n.useState)(!1),de=Object(l.a)(pe,2),_e=de[0],fe=de[1],he=Object(n.useState)(!1),be=Object(l.a)(he,2),ge=be[0],Ee=be[1],ve=Object(n.useState)({email:"email@mail.com"}),Ne=Object(l.a)(ve,2),ke=Ne[0],Oe=Ne[1],Ce=Object(u.g)();Object(n.useEffect)(function(){S.getUserInfo().then(function(e){ue(e)}).catch(console.log)},[]),Object(n.useEffect)(function(){S.getInitialCards().then(function(e){ne(e)}).catch(console.log)},[]),Object(n.useEffect)(function(){var e=localStorage.getItem("jwt");e&&W(e).then(function(e){e.data._id&&(Ee(!0),Oe({email:e.data.email}),Ce.push("/"))}).catch(function(e){console.log(e),Ce.push("/signin")}).finally(function(){ie(!1)})},[]);var je=function(){p(!1),h(!1),o(!1),j(!1),A(!1),q(!1)};return c.a.createElement("div",{className:"App"},c.a.createElement(v.Provider,{value:me},c.a.createElement(E,{loggedIn:ge,email:ke.email,handleSignout:function(){Ee(!1),localStorage.removeItem("jwt"),Ce.push("/signin")}}),c.a.createElement(u.d,null,c.a.createElement(J,{exact:!0,path:"/",loggedIn:ge,isCheckingToken:re},c.a.createElement(k,{onDeleteButtonClick:function(e){A(!0),$(e)},onEditProfileClick:function(){o(!0)},onAddPlaceClick:function(){p(!0)},onEditAvatarClick:function(){h(!0)},onCardClick:function(e){j(!0),$({name:e.name,link:e.link})},cards:ae,onCardLike:function(e){var t=e.likes.some(function(e){return e._id===me._id});S.changeLikeCardStatus(e._id,t).then(function(t){ne(function(a){return a.map(function(a){return a._id===e._id?t:a})})}).catch(console.log)}})),c.a.createElement(u.b,{path:"/signup"},c.a.createElement(D,{handleRegister:function(e){var t=e.email,a=e.password;Q(t,a).then(function(e){e.data._id?(G("successful"),q(!0),Ce.push("/signin")):(G("unsuccessful"),q(!0))}).catch(function(e){console.log(e),G("unsuccessful"),q(!0)})}})),c.a.createElement(u.b,{path:"/signin"},c.a.createElement(I,{handleLogin:function(e){var t=e.email,a=e.password;V(t,a).then(function(e){e.token&&(Ee(!0),Oe({email:t}),localStorage.setItem("jwt",e.token),Ce.push("/"))}).catch(function(e){console.log(e),G("unsuccessful"),q(!0)})}})),c.a.createElement(u.b,null,ge?c.a.createElement(u.a,{to:"/"}):c.a.createElement(u.a,{to:"/signin"}))),c.a.createElement(O,null),c.a.createElement(L,{isLoading:_e,isOpen:a,onClose:je,onUpdateUser:function(e){var t=e.name,a=e.about;fe(!0),S.setUserInfo({name:t,about:a}).then(function(e){ue(e),je()}).catch(console.log).finally(function(){fe(!1)})}}),c.a.createElement(U,{isLoading:_e,isOpen:m,onClose:je,onAddPlaceSubmit:function(e){fe(!0),S.createCard(e).then(function(e){ne([e].concat(Object(i.a)(ae))),je()}).catch(console.log).finally(function(){fe(!1)})}}),c.a.createElement(T,{isLoading:_e,isOpen:f,onClose:je,onUpdateAvatar:function(e){fe(!0),S.setUserAvatar(e).then(function(e){ue(e),je()}).catch(console.log).finally(function(){fe(!1)})}}),c.a.createElement(x,{isLoading:_e,isOpen:P,onClose:je,onSubmitDelete:function(e){e.preventDefault(),fe(!0),S.deleteCard(Z._id).then(function(e){var t=ae.filter(function(e){return e._id!==Z._id});ne(t),je()}).catch(console.log).finally(function(){fe(!1)})}}),c.a.createElement(C,{card:Z,isOpen:N,onClose:je}),c.a.createElement(H,{isOpen:B,onClose:je,type:z,isTooltipOpen:B})))},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,53)).then(function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),o(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p.a,null,c.a.createElement(X,null)))),Z()}},[[35,1,2]]]);
//# sourceMappingURL=main.fb5d1b25.chunk.js.map